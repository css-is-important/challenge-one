.card-collection {
  display: flex;
  flex-wrap: wrap;
  align-items: stretch;

  .card {
    background: #fff;
    -webkit-box-shadow: 0 0 10px 0 rgba(0,0,0,0.3);
            box-shadow: 0 0 10px 0 rgba(0,0,0,0.3);
    @include rowMachine(3, 4);
    display: flex;
    flex-direction: column;

    &:nth-child(3n+1):nth-last-child(-n+3),
    &:nth-child(3n+1):nth-last-child(-n+3) ~ * {
      @media #{$tablet} {
        @include rems(margin-bottom, 4);
      }
      @media #{$tablet-portrait} {
        @include rems(margin-bottom, 2);
      }
    }

    @media #{$tablet} {
      @include rowMachine(2, 4);
    }

    @media #{$tablet-portrait} {
      @include rowMachine(2, 2);
    }

    @media #{$phone} {
      &:nth-child(3n+1):nth-last-child(-n+3),
      &:nth-child(3n+1):nth-last-child(-n+3) ~ * {
        @include rems(margin-bottom, 2);
      }

      @include rowMachine(1, 2);
    }

    .card-thumbnail {
      flex-shrink: 0;
    }

    .card-content {
      @include rems(padding, 4);
      border-top: 4px solid $secondary;
      flex-grow: 1;
      display: flex;
      flex-direction: column;

      @media #{$phone} {
        @include rems(padding, 2);
      }

      a {
        align-self: flex-end;
        margin-top: auto;
      }
    }
  }
}
